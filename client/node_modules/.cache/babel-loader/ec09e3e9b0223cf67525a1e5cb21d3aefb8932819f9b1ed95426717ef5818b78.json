{"ast":null,"code":"import _regeneratorRuntime from\"E:/project/Mern-Quiz-App/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/project/Mern-Quiz-App/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"E:/project/Mern-Quiz-App/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"E:/project/Mern-Quiz-App/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"E:/project/Mern-Quiz-App/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Container,Form,Button}from'react-bootstrap';import{loginUser}from'./../Actions/userAction';import{useSelector,useDispatch}from'react-redux';import Loader from'../Components/Loader';import Success from'../Components/Success';import Error from'../Components/Error';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Login(){var loginState=useSelector(function(state){return state.loginUserReducer;});var loading=loginState.loading,success=loginState.success,error=loginState.error;var data=sessionStorage.getItem('userData');// console.log(token);\nvar dispatch=useDispatch();var _useState=useState({registration_no:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),currentUser=_useState4[0],setCurrentUser=_useState4[1];var handleChange=function handleChange(e){setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},e.target.name,e.target.value)));};var loginHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var registration_no,password,userdata;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();registration_no=user.registration_no,password=user.password;if(!(registration_no==null||password==null)){_context.next=6;break;}window.alert(\"Please fill the fields correctly..\");_context.next=9;break;case 6:userdata={registration_no:registration_no,password:password};_context.next=9;return dispatch(loginUser(userdata));case 9:case\"end\":return _context.stop();}},_callee);}));return function loginHandler(_x){return _ref.apply(this,arguments);};}();/////////////////////////            /////////////////\nuseEffect(function(){if(data){setCurrentUser(JSON.parse(data));}},[data]);var getroute=function getroute(){if(currentUser===null){return;}else if(currentUser&&currentUser.isAdmin!==undefined&&currentUser.isAdmin){// console.log('cll');\nreturn'admin/dashboard';}else{console.log('f');return'home';}};return/*#__PURE__*/_jsxs(_Fragment,{children:[loading&&/*#__PURE__*/_jsx(Loader,{}),success&&getroute()&&/*#__PURE__*/_jsx(Success,{success:\"Successfully Login\",route:getroute()}),error&&/*#__PURE__*/_jsx(Error,{error:\"\".concat(error.message)}),/*#__PURE__*/_jsx(\"div\",{className:\"login\",children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Form,{className:\"registerform\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicRegistratino_No\",children:[/*#__PURE__*/_jsx(Form.Label,{style:{fontWeight:\"bold\"},children:\"Registration_No\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",placeholder:\"enter registration number\",name:\"registration_no\",value:user.registration_no,onChange:handleChange})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{style:{fontWeight:\"bold\"},children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Password\",name:\"password\",value:user.password,onChange:handleChange})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:loginHandler,children:\"Login\"})]})})})]});}export default Login;","map":{"version":3,"names":["React","useState","useEffect","Container","Form","Button","loginUser","useSelector","useDispatch","Loader","Success","Error","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","loginState","state","loginUserReducer","loading","success","error","data","sessionStorage","getItem","dispatch","_useState","registration_no","password","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","currentUser","setCurrentUser","handleChange","e","_objectSpread","_defineProperty","target","name","value","loginHandler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","userdata","wrap","_callee$","_context","prev","next","preventDefault","window","alert","stop","_x","apply","arguments","JSON","parse","getroute","isAdmin","undefined","console","log","children","route","concat","message","className","Group","controlId","Label","style","fontWeight","Control","type","placeholder","onChange","variant","onClick"],"sources":["E:/project/Mern-Quiz-App/client/src/Screens/Login.jsx"],"sourcesContent":["import React, { useState,useEffect } from 'react'\r\nimport {Container,Form,Button} from 'react-bootstrap'\r\nimport {loginUser} from './../Actions/userAction'\r\nimport {useSelector,useDispatch} from 'react-redux';\r\nimport Loader from '../Components/Loader';\r\nimport Success from '../Components/Success';\r\nimport Error from '../Components/Error';\r\n\r\nfunction Login() {\r\n\r\n  const loginState = useSelector((state)=>state.loginUserReducer)\r\n  const {loading,success,error} = loginState; \r\n  const data = sessionStorage.getItem('userData');\r\n  // console.log(token);\r\n  \r\n  const dispatch = useDispatch();\r\n  \r\n  const [user,setUser] = useState({\r\n    registration_no:\"\",\r\n    password:\"\"\r\n  });\r\n\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n \r\n\r\n  const handleChange = (e) => {\r\n    setUser({...user,[e.target.name]:e.target.value})\r\n  }\r\n\r\n  const loginHandler = async(e) =>{\r\n    e.preventDefault();\r\n    const {registration_no,password} = user;\r\n    if(registration_no==null || password==null){\r\n      window.alert(\"Please fill the fields correctly..\");\r\n    }else{\r\n      const userdata = {registration_no,password};\r\n      await dispatch(loginUser(userdata));\r\n    }\r\n  }\r\n  /////////////////////////            /////////////////\r\n  useEffect(() => {\r\n    if (data) {\r\n      setCurrentUser(JSON.parse(data))\r\n    }\r\n  }, [data]);\r\n\r\n  const getroute=()=>{\r\n    if (currentUser === null) {\r\n      return;\r\n    } else if (currentUser && currentUser.isAdmin !== undefined && currentUser.isAdmin) {\r\n      // console.log('cll');\r\n      return 'admin/dashboard';\r\n    } else {\r\n      console.log('f');\r\n      return 'home';\r\n    }\r\n  }\r\n  \r\n\r\n  return (\r\n    <>\r\n    {loading && <Loader/>}\r\n    {success &&getroute() && <Success success=\"Successfully Login\" route={getroute()}/>}\r\n    {error && <Error error={`${error.message}`} />}\r\n    <div className='login'>\r\n    <Container >\r\n    \r\n      <Form className=\"registerform\">\r\n        <h1>Login</h1>\r\n        \r\n        <Form.Group className=\"mb-3\" controlId=\"formBasicRegistratino_No\">\r\n          <Form.Label style={{fontWeight:\"bold\"}}>Registration_No</Form.Label>\r\n          <Form.Control\r\n            type=\"number\"\r\n            placeholder=\"enter registration number\"\r\n            name='registration_no'\r\n            value={user.registration_no}\r\n            onChange={handleChange}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n          <Form.Label style={{fontWeight:\"bold\"}}>Password</Form.Label>\r\n          <Form.Control\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            name='password'\r\n            value={user.password}\r\n            onChange={handleChange}\r\n          />\r\n        </Form.Group>\r\n        \r\n\r\n        <Button variant=\"primary\" onClick={loginHandler}>\r\n          Login\r\n        </Button>\r\n      </Form>\r\n    </Container>\r\n    </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Login"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}