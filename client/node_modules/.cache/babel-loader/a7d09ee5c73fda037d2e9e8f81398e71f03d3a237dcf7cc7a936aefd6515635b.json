{"ast":null,"code":"import _toConsumableArray from\"E:/project/Mern-Quiz-App/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"E:/project/Mern-Quiz-App/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useSelector,useDispatch}from'react-redux';import{getResultByExamId}from'../../Actions/examAction';import{getAllUser}from'../../Actions/userAction';import Loader from'../Loader';import Error from'../Error';import{Table}from'react-bootstrap';import ResultData from'./ResultData';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Results(exam_id){var dispatch=useDispatch();var resultdata=useSelector(function(state){return state.getResultByExamIdReducer;});var Result=resultdata.Result;// const userData = useSelector((state) => state.getUsersByIdReducer);\n// const { students, loading, error } = userData;\nvar userData=useSelector(function(state){return state.getAllUserReducer;});var users=userData.users,loading=userData.loading,error=userData.error;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),sortedStudents=_useState2[0],setSortedStudents=_useState2[1];// console.log(Result)\nuseEffect(function(){dispatch(getResultByExamId(exam_id));},[]);useEffect(function(){if(Result!=null){// const user_ids = Result.map((result) => result.user_id);\n// dispatch(getUsersById(user_ids));\ndispatch(getAllUser());}},[Result,dispatch]);// useEffect(() => {\n//   if (students.length > 0) {\n//     const sorted = [...students].sort((a, b) => a.registration_no - b.registration_no);\n//     setSortedStudents(sorted);\n//   }\n// }, [students]);\nuseEffect(function(){if(users.length>0){var sorted=_toConsumableArray(users).sort(function(a,b){return a.registration_no-b.registration_no;});setSortedStudents(sorted);}},[users]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{children:[loading&&/*#__PURE__*/_jsx(Loader,{}),error&&/*#__PURE__*/_jsx(Error,{}),/*#__PURE__*/_jsx(\"div\",{style:{paddingLeft:\"6rem\",paddingRight:\"6rem\",paddingTop:\"2rem\"},children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name Of Student\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Registration No\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Mark\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Review Answers\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:Result&&sortedStudents.map(function(student){var res=Result.find(function(result){return result.user_id===student._id;});var percentage=res!==undefined?res.percentage!==undefined?res.percentage:null:null;var answers=res!==undefined?res.answers!==undefined?res.answers:null:null;return/*#__PURE__*/_jsx(ResultData,{student:student,answers:answers,exam_id:exam_id,percentage:percentage});})})]})})]})});}export default Results;","map":{"version":3,"names":["React","useEffect","useState","useSelector","useDispatch","getResultByExamId","getAllUser","Loader","Error","Table","ResultData","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Results","exam_id","dispatch","resultdata","state","getResultByExamIdReducer","Result","userData","getAllUserReducer","users","loading","error","_useState","_useState2","_slicedToArray","sortedStudents","setSortedStudents","length","sorted","_toConsumableArray","sort","a","b","registration_no","children","style","paddingLeft","paddingRight","paddingTop","map","student","res","find","result","user_id","_id","percentage","undefined","answers"],"sources":["E:/project/Mern-Quiz-App/client/src/Components/Admin/ResultsPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux'; \r\nimport { getResultByExamId } from '../../Actions/examAction';\r\nimport { getAllUser } from '../../Actions/userAction';\r\nimport Loader from '../Loader';\r\nimport Error from '../Error';\r\nimport { Table } from 'react-bootstrap';\r\nimport ResultData from './ResultData';\r\n\r\nfunction Results(exam_id) {\r\n  const dispatch = useDispatch();\r\n  const resultdata = useSelector((state) => state.getResultByExamIdReducer);\r\n  const { Result } = resultdata;\r\n  // const userData = useSelector((state) => state.getUsersByIdReducer);\r\n  // const { students, loading, error } = userData;\r\n  const userData = useSelector((state) => state.getAllUserReducer);\r\n  const { users, loading, error } = userData;\r\n  const [sortedStudents, setSortedStudents] = useState([]);\r\n  // console.log(Result)\r\n  useEffect(() => {\r\n    dispatch(getResultByExamId(exam_id));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (Result != null) {\r\n      // const user_ids = Result.map((result) => result.user_id);\r\n      // dispatch(getUsersById(user_ids));\r\n      dispatch(getAllUser());\r\n    }\r\n  }, [Result,dispatch]);\r\n\r\n  // useEffect(() => {\r\n  //   if (students.length > 0) {\r\n  //     const sorted = [...students].sort((a, b) => a.registration_no - b.registration_no);\r\n  //     setSortedStudents(sorted);\r\n  //   }\r\n  // }, [students]);\r\n  useEffect(() => {\r\n    if (users.length > 0) {\r\n      const sorted = [...users].sort((a, b) => a.registration_no - b.registration_no);\r\n      setSortedStudents(sorted);\r\n    }\r\n  }, [users]);\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        {loading && <Loader />}\r\n        {error && <Error />}\r\n\r\n        <div style={{paddingLeft:\"6rem\",paddingRight:\"6rem\",paddingTop:\"2rem\"}}>\r\n          <Table>\r\n            <thead>\r\n              <tr>\r\n                <th>Name Of Student</th>\r\n                <th>Registration No</th>\r\n                <th>Mark</th>\r\n                <th>Review Answers</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {Result && sortedStudents.map((student) => {\r\n                const res = Result.find((result) => result.user_id === student._id);\r\n         \r\n                const percentage = res !== undefined ? res.percentage !== undefined ? res.percentage : null : null; \r\n               \r\n                const answers = res !== undefined ? res.answers !== undefined ? res.answers : null : null; \r\n\r\n                return (\r\n                  <ResultData student={student} answers={answers} exam_id={exam_id} percentage={percentage} />\r\n                );\r\n              })}\r\n            </tbody>\r\n          </Table>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Results;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}